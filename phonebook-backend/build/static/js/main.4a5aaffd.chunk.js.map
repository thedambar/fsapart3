{"version":3,"sources":["services/personService.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/Error.js","components/Notice.js","App.js","index.js"],"names":["baseUrl","personService","axios","get","then","response","data","newEntry","post","id","console","log","request","put","concat","delete","Person","_ref","person","persons","setPersons","setError","setNotice","react_default","a","createElement","name","number","Persons_DeletePersonButton","DeletePersonButton","_ref2","onClick","setTimeout","catch","filter","p","Persons","_ref3","pending","filteredPersons","toString","toLowerCase","includes","length","map","Persons_Person","key","PersonForm","_useState","useState","_useState2","Object","slicedToArray","newName","setNewName","_useState3","_useState4","newNumber","setNewNumber","value","onChange","event","target","type","preventDefault","testExists","oldEntry","window","confirm","error","Filter","setFilter","Fragment","Error","className","Notice","notice","App","_useState5","_useState6","setPending","_useState7","_useState8","_useState9","_useState10","useEffect","components_Error","components_Notice","components_Filter","components_PersonForm","components_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.4a5aaffd.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data)\n};\n\nconst create = newEntry => {\n  const request = axios.post(baseUrl, newEntry);\n  return request.then(response => response.data);\n}\n\nconst update = (id, newEntry) => {\n  console.log(newEntry)\n  const request = axios.put(`${baseUrl}/${id}`, newEntry);\n  return request.then(response => request.then(response.data));\n}\n\nconst del = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => request.then(response.data));\n}\n\nexport default {getAll, create, update, del};\n","import React from 'react';\nimport personService from '../services/personService';\n\nconst Person = ({person, persons, setPersons, setError, setNotice}) => {\n  return (\n    <div>\n      {person.name} {person.number} <DeletePersonButton person={person} persons={persons} setPersons={setPersons} setError={setError} setNotice={setNotice}/>\n    </div>  \n  )\n}\n\nconst DeletePersonButton = ({person, persons, setPersons, setNotice, setError}) => {\n  const handleDeletePerson = () => {\n    personService.del(person.id)\n      .then(() => {\n        setNotice(`Deleted ${person.name}`);\n        setTimeout(() => setNotice(null), 5000);\n      })\n      .catch(() => {\n        setError(`Error: could not delete ${person.name}.`);\n        setTimeout(() => setError(null), 5000);\n      })\n    setPersons(persons.filter(p => p.id !== person.id));\n  } \n\n  return <button onClick={handleDeletePerson}>delete</button>\n}\n\nconst Persons = ({persons, filter, setPersons, pending, setNotice, setError}) => {\n  if (pending) {\n    return <div>Loading...</div>;\n  }\n  const filteredPersons = filter !== '' ? \n    persons.filter((person) => \n      person.name.toString().toLowerCase().includes(filter.toString().toLowerCase())) :\n    persons\n  \n  if (filteredPersons.length > 0) {\n    return filteredPersons.map((person) => \n      <Person \n        key={person.id} \n        person={person} \n        persons={persons} \n        setPersons={setPersons} \n        setNotice={setNotice} \n        setError={setError} />\n    )\n   }\n  return <div>No entries found.</div>\n}\n\nexport default Persons;","import React, {useState} from 'react';\nimport personService from '../services/personService';\n\nconst PersonForm = ({persons, setPersons, setError, setNotice}) => {\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n\n  const handleNameChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const testExists = persons.filter(person => person.name === newName);\n    if (testExists.length > 0) {\n      const oldEntry = testExists[0];\n      if (window.confirm(`${newName} is already in phonebook.  Update number to ${newNumber}`)) {\n        personService\n          .update(oldEntry.id, {name: newName, number: newNumber, id: oldEntry.id})\n          .then(newEntry => {\n            setNotice(`Updated number for ${newName}`);\n            setTimeout(() => setNotice(null), 5000);\n            setPersons(persons.map(person => person.id !== newEntry.data.id ? person : newEntry.data));\n          })\n          .catch(error => {\n            setError(`Error updating ${newName}`);\n            setTimeout(() => setError(null), 5000);\n          })\n        setNewName('');\n        setNewNumber('');\n        return;\n      } else {\n        return;\n      }\n    }\n    personService\n      .create({name: newName, number: newNumber})\n      .then(newEntry => {\n        setNotice(`Added entry for ${newName}`);\n        setTimeout(() => setNotice(null), 5000);\n        setPersons(persons.concat(newEntry)) \n      })\n      .catch(error => {\n        setError(`Error creating entry ${newName}`);\n        setTimeout(() => setError(null), 5000);     \n      })\n    setNewName('');\n    setNewNumber('')\n  }\n\n  return (\n    <form>\n      <div>\n        name: <input value={newName} onChange={handleNameChange}/>\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\" onClick={addPerson}>add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;","import React from 'react';\n\nconst Filter = ({filter, setFilter}) => {\n\n  const handleFilterChange = (event) => setFilter(event.target.value)\n\n  return (\n    <>\n      <form>\n        <div>\n          filter shown with <input value={filter} onChange={handleFilterChange} />\n        </div>\n      </form>\n    </>\n  )\n}\n\nexport default Filter;","import React from 'react';\n\nconst Error = ({error}) => {\n  if (error) {\n    return (\n      <div className=\"error\">{error}</div>\n    )\n  }\n}\n\nexport default Error;","import React from 'react';\n\nconst Notice = ({notice}) => {\n  if (notice) {\n    return (\n      <div className=\"notice\">{notice}</div>\n    )\n  }\n}\n\nexport default Notice;","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Error from './components/Error'\nimport Notice from './components/Notice'\nimport axios from 'axios'\nimport personService from './services/personService';\nimport './index.css'\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [pending, setPending] = useState(true);\n  const [notice, setNotice] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n        setPending(false);\n      })\n      .catch(error => {\n        setError(`Could not load data: ${error}`);\n        setTimeout(() => setError(null), 5000);\n      })\n  }, [])\n\n  return (\n    <div>\n      <Error error={error} />\n      <Notice notice={notice} />\n      <h2>Phonebook</h2>\n      <Filter filter={filter} setFilter={setFilter} />\n      <h2>add a new</h2>\n      <PersonForm \n        persons={persons} \n        setPersons={setPersons} \n        setNotice={setNotice} \n        setError={setError}/>\n      <h2>Numbers</h2>\n      <Persons \n        persons={persons} \n        filter={filter} \n        setPersons={setPersons} \n        pending={pending} \n        setNotice={setNotice} \n        setError={setError}/>\n    </div>\n  )\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom/client'\n\nimport App from './App'\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />)"],"sourceRoot":""}