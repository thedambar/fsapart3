(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(37)},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(19),c=n.n(o),u=n(5),i=n(9),l="/api/persons",s=function(){return i.a.get(l).then(function(e){return e.data})},f=function(e){return i.a.post(l,e).then(function(e){return e.data})},m=function(e,t){console.log(t);var n=i.a.put("".concat(l,"/").concat(e),t);return n.then(function(e){return n.then(e.data)})},d=function(e){var t=i.a.delete("".concat(l,"/").concat(e));return t.then(function(e){return t.then(e.data)})},E=function(e){var t=e.person,n=e.persons,r=e.setPersons,o=e.setError,c=e.setNotice;return a.a.createElement("div",null,t.name," ",t.number," ",a.a.createElement(p,{person:t,persons:n,setPersons:r,setError:o,setNotice:c}))},p=function(e){var t=e.person,n=e.persons,r=e.setPersons,o=e.setNotice,c=e.setError;return a.a.createElement("button",{onClick:function(){d(t.id).then(function(){o("Deleted ".concat(t.name)),setTimeout(function(){return o(null)},5e3)}).catch(function(){c("Error: could not delete ".concat(t.name,".")),setTimeout(function(){return c(null)},5e3)}),r(n.filter(function(e){return e.id!==t.id}))}},"delete")},v=function(e){var t=e.persons,n=e.filter,r=e.setPersons,o=e.pending,c=e.setNotice,u=e.setError;if(o)return a.a.createElement("div",null,"Loading...");var i=""!==n?t.filter(function(e){return e.name.toString().toLowerCase().includes(n.toString().toLowerCase())}):t;return i.length>0?i.map(function(e){return a.a.createElement(E,{key:e.id,person:e,persons:t,setPersons:r,setNotice:c,setError:u})}):a.a.createElement("div",null,"No entries found.")},b=function(e){var t=e.persons,n=e.setPersons,o=e.setError,c=e.setNotice,i=Object(r.useState)(""),l=Object(u.a)(i,2),s=l[0],d=l[1],E=Object(r.useState)(""),p=Object(u.a)(E,2),v=p[0],b=p[1];return a.a.createElement("form",null,a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:s,onChange:function(e){return d(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:v,onChange:function(e){return b(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var r=t.filter(function(e){return e.name===s});if(r.length>0){var a=r[0];return window.confirm("".concat(s," is already in phonebook.  Update number to ").concat(v))?(m(a.id,{name:s,number:v,id:a.id}).then(function(e){c("Updated number for ".concat(s)),setTimeout(function(){return c(null)},5e3),n(t.map(function(t){return t.id!==e.data.id?t:e.data}))}).catch(function(e){o("Error updating ".concat(s)),setTimeout(function(){return o(null)},5e3)}),d(""),void b("")):void 0}f({name:s,number:v}).then(function(e){c("Added entry for ".concat(s)),setTimeout(function(){return c(null)},5e3),n(t.concat(e))}).catch(function(e){o("Error creating entry ".concat(s)),setTimeout(function(){return o(null)},5e3)}),d(""),b("")}},"add")))},h=function(e){var t=e.filter,n=e.setFilter;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",null,a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))))},g=function(e){var t=e.error;if(t)return a.a.createElement("div",{className:"error"},t)},j=function(e){var t=e.notice;if(t)return a.a.createElement("div",{className:"notice"},t)},O=(n(35),function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),l=i[0],f=i[1],m=Object(r.useState)(!0),d=Object(u.a)(m,2),E=d[0],p=d[1],O=Object(r.useState)(null),w=Object(u.a)(O,2),N=w[0],P=w[1],S=Object(r.useState)(null),C=Object(u.a)(S,2),k=C[0],T=C[1];return Object(r.useEffect)(function(){console.log("effect"),s().then(function(e){o(e),p(!1)}).catch(function(e){T("Could not load data: ".concat(e)),setTimeout(function(){return T(null)},5e3)})},[]),a.a.createElement("div",null,a.a.createElement(g,{error:k}),a.a.createElement(j,{notice:N}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(h,{filter:l,setFilter:f}),a.a.createElement("h2",null,"add a new"),a.a.createElement(b,{persons:n,setPersons:o,setNotice:P,setError:T}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(v,{persons:n,filter:l,setPersons:o,pending:E,setNotice:P,setError:T}))});c.a.createRoot(document.getElementById("root")).render(a.a.createElement(O,null))}},[[23,2,1]]]);
//# sourceMappingURL=main.4a5aaffd.chunk.js.map